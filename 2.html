<!DOCTYPE html>
<html>
<body>

<button onclick="startListening()">Start Listening</button>

<h3>Received:</h3>
<p id="output"></p>

<script>

const AudioContext = window.AudioContext || window.webkitAudioContext;
const ctx = new AudioContext();

let analyser;
let dataArray;

async function startListening(){

const stream = await navigator.mediaDevices.getUserMedia({ audio: true });

const source = ctx.createMediaStreamSource(stream);

analyser = ctx.createAnalyser();

analyser.fftSize = 2048;

source.connect(analyser);

dataArray = new Uint8Array(analyser.frequencyBinCount);

listen();

}

function listen(){

setInterval(()=>{

analyser.getByteFrequencyData(dataArray);

let max = 0;
let index = 0;

for(let i=0;i<dataArray.length;i++){

if(dataArray[i] > max){

max = dataArray[i];
index = i;

}

}

if(max > 150){ // ignore noise

let freq = index * ctx.sampleRate / analyser.fftSize;

let charCode = Math.round((freq - 500) / 10);

if(charCode >= 32 && charCode <= 126){

document.getElementById("output").innerText += String.fromCharCode(charCode);

}

}

}, 250);

}

</script>

</body>
</html>if(charCode > 0 && charCode < 128){

document.getElementById("output").innerText += String.fromCharCode(charCode);

}

}, 200);

}

</script>

</body>
</html>
